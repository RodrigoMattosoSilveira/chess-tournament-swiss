# round
Model a tournament round

# Model
A round is a collection of games between a tournament's players.

In a `classical tournament`, with `n` players, we have `(n-1)` rounds; there is an interesting exception where all players play each other twice, once with white and again with black pieces.

In a `match`, with two players, the number of rounds is defined by match rules, ranging from a playing a pre-defined number of games, reaching a certain number of points - in some cases draws do not count- etc.

In a `swiss pairing` tournament, the number of rounds is defined by tournament rules; in this case, the number of rounds also establishes the maximum number of players, to avoid the possibility of too many players with the top scores.

Regardless, we will focus on `swiss pairing` tournament for now.
````typescript
/**
 * State
 * 		The tournament round games state be provided and it is initialized to `scheduled` at the time of the round
 * 		creation
 * 		The tournament round state cannot transition to `underway` unless the tournament state is `underway`
 * 		When state transitions to `underway` the tournament round started date is initialised to NOW
 * 		When state transitions to `completed` the tournament round ended date is initialised to NOW
 * Games
 * 		The tournament round games cannot be provided and it is initialized to `[]` at the time of the round creation
 * Number
 * 		The tournament round number cannot be provided when creating tournament round;
 * 		The tournament round number cannot be patched;
 *		 When creating a round, read all tournament rounds,
 * 			If there are no tournament rounds, then round number is 1
 * 			else
 * 			round number is equal to n + 1, where n is the highest tournament round number
 * Started
 * 		The tournament round started date is created when its state transitions from scheduled to started, and it cannot
 * 		be patched;
 * Ended
 * 		The tournament round ended date is created when its state transitions from underway to completed, and it cannot
 * 		be patched;
 */
export interface RoundDto {
	id?: string;					// generated by the server
	tournament: string;				// required, must exist
    number: number;
	games?: Array<string>
	state?:string;
    started?: number
    ended?: number
}
````

Note that the only attribute required to create a `round` is the `tournament`. All other values are set to their defaults.

#curl
## GET All rounds
Use the following `curl` command to retrieve all rounds:
````bash
curl --location --request GET 'localhost:3000/round' --header 'Content-Type: application/json'
````

Once executed, the service returns a collection of rounds
````json
[
  {}, {}
]
````

See the RoundDto above for details on the round model.

## POST
Use the following `curl` command to create a round:
````bash
curl --location --request POST 'localhost:3000/round' \
--header 'Content-Type: application/json' \
--data-raw '{
"tournament": "Zvei69rE0"
}'
````

Once executed, the service returns an id
````json
{
    "id": "nRo8tL2mP"
}
````

Use the terminal to create an environment variable to help us with the remaining curl examples

````bash
$ REST_API_ROUND_ID="put_your_id_here"
````

## GET a particular found
Use the following `curl` command to retrieve a particular found:
````bash
curl --location --request GET "localhost:3000/round/$REST_API_ROUND_ID" --header 'Content-Type: application/json'
````

Once executed, the service returns a collection of rounds
````json
[
  { }, {}
]
````

## Workflow**
* I, as a Player, sign up for a tournament;
* I, as a TD, create a tournament round;
* I, as a TD, trigger a tournament round scheduling;
* I, as the system, create a tournament round's games;
* I, as a TD, start a tournament round;
* I, as a tournament round game's white pieces' player, start a tournament round's game;
* I, as a tournament round game's player or as the TD, record a tournament round game result;
* I, as the system, when recording a tournament round game result, check whether the tournament round is complete;
* I, as the system, when recording a tournament round completion, check whether the tournament is complete;

