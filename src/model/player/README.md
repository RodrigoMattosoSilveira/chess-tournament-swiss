# player
Model a tournament player

# Setup
## Model
A tournament player consists of a tournament, an user, and some attributes:
````typescript
export interface PlayerDto {
	id: string;						// generated by the server
	user: string;					// required, must exist
	tournament: string;				// required, must exist
	hadByeOrForfeit?: boolean;		// True after player had a bye or was awarded a forfeit
	byeNextRound?: boolean;			// True if player is scheduled for next round bye
	playedAgainst?: Array<number>; 	// Players (not users)
	playedColor?: Array<number>; 	// -1=Black, 1=White
	results?: Array<number>; 		// -1 = loss, 0.5=tie, 1=win
	state?:string; 		            // scheduled, withdrew, playing, forfeit, done
}

````

Note that the only attributes required to create a tournament player are the `user id` and `tournament id`. All other values are set to their defaults.
* id - Is generated when creating a tournament player;
* user - the generated user id;
* tournament - the generated tournament id;
* hadByeOrForfeit - default is `false`;
* byeNextRound - default is `false`;
* playedAgainst - default is `[]`;
* playedColor - default is `[]`;
* results - default is `[]`;
* state - default is `scheduled`;

## Creating users and tournaments
These instructions assume that the service is running:
````bash
$ yarn start:dev
````
### Users

#curl
## GET ALL TOURNAMENTS
Use the following `curl` command to retrieve all tournaments:
````bash
curl --location --request GET 'localhost:3000/player' --header 'Content-Type: application/json'
````


Once executed, the service returns a user id
````json
[]
````

Of course, once you add players, the service will return something like:
````json
[
    {"tournament":"qOSRL_bOe",
      "user":"CFE_mIoQh",
      "id":"QYqVEOPxQ",
      "hadByeOrForfeit":false,
      "byeNextRound":false,"playedAgainst":[],
      "playedColor":[],
      "results":[],
      "state":"scheduled"
    }
]
````

## POST
Use the following `curl` command to create a user:
````bash
curl --location --request POST 'localhost:3000/player' \
--header 'Content-Type: application/json' \
--data-raw '{
"tournament": "qOSRL_bOe",
"user": "CFE_mIoQh"
}'
````

Once executed, the service returns a user id
````json
{
    "id": "QYqVEOPxQ"
}
````

Use the terminal to create an environment variable to help us with the remaining curl examples

````bash
$ REST_API_EXAMPLE_ID="put_your_id_here"
````

## GET A PLAYER
Use the following `curl` command to retrieve a user:
````bash
$ curl --location --request GET "localhost:3000/player/$REST_API_PLAYER_ID" --header 'Content-Type: application/json'
````

Once executed, the service returns a user id
````json
{
  "tournament":"qOSRL_bOe",
  "user":"CFE_mIoQh",
  "id":"QYqVEOPxQ",
  "hadByeOrForfeit":false,
  "byeNextRound":false,
  "playedAgainst":[],
  "playedColor":[],
  "results":[],
  "state":"scheduled"
}
````

## PATCH
Use the following `curl` command to update the maximum number of players:
````bash
curl --location --request PATCH "localhost:3000/player/$REST_API_EXAMPLE_ID" \
--header 'Content-Type: application/json' \
--data-raw '{
    "hadByeOrForfeit": true
}'
````

The service returns the updated tournament's:
````json
{
  "tournament":"doXsurGe9",
  "user":"YC0vtQTD_9",
  "id":"5mp2HL7H1",
  "hadByeOrForfeit":true,
  "byeNextRound":false,
  "playedAgainst":[],
  "playedColor":[],
  "results":[],
  "state":"scheduled"}
````

You can use the PATCH command to update multiple attributes:
````bash
curl --location --request PATCH "localhost:3000/player/$REST_API_EXAMPLE_ID" \
--header 'Content-Type: application/json' \
--data-raw '{
  "hadByeOrForfeit": false,
  "byeNextRound": true
}'
````

## PUT
`This service does not support PUT`

## DELETE
`This service does not support DELETE`


# For the future
game
id: string, // unique game id
tournament: string, // unique tournament id
white: string, // unique player id, must differ from black
black: string, // unique player id, must differ from white
round: string, // unique tournament round id
state: string, // unique state round id
date: string,  // a valid date

round
id: string, // unique game id
tournament: string, // unique tournament id
games: Array<string> // unique set of games
state: string, // unique state round id
