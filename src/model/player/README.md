# player
Model a tournament player

# Setup
## Model
A tournament player consists of a tournament, an user, and some attributes:
````typescript
export interface PlayerDto {
	id: string;						// generated by the server
	user: string;					// required, must exist
	tournament: string;				// required, must exist
	hadByeOrForfeit?: boolean;		// True after player had a bye or was awarded a forfeit
	byeNextRound?: boolean;			// True if player is scheduled for next round bye
	playedAgainst?: Array<number>; 	// Players (not users)
	playedColor?: Array<number>; 	// -1=Black, 1=White
	results?: Array<number>; 		// -1 = loss, 0.5=tie, 1=win
	state?:string; 		            // scheduled, withdrew, playing, forfeit, done
}
````

Note that the only attributes required to create a tournament player are the `user id` and `tournament id`. All other values are set to their defaults.
* id - Is generated when creating a tournament player;
* user - the generated user id;
* tournament - the generated tournament id;
* hadByeOrForfeit - default is `false`;
* byeNextRound - default is `false`;
* playedAgainst - default is `[]`;
* playedColor - default is `[]`;
* results - default is `[]`;
* state - default is `scheduled`;

#curl
## GET ALL PLAYERS
Use the following `curl` command to retrieve all tournaments:
````bash
curl --location --request GET 'localhost:3000/player' --header 'Content-Type: application/json'
````

Once executed, the service returns collection of players
````json
[
  { }, {}
]
````

See the PlayerDto above for details on the player model.

## POST
Use the following `curl` command to create a user:
````bash
curl --location --request POST 'localhost:3000/player' \
--header 'Content-Type: application/json' \
--data-raw '{
"tournament": "Zvei69rE0",
"user": "xuBs3_tvU"
}'
````

Once executed, the service returns a user id
````json
{
    "id": "nRo8tL2mP"
}
````

Use the terminal to create an environment variable to help us with the remaining curl examples

````bash
$ REST_API_PLAYER_ID="put_your_id_here"
````
## GET A PLAYER
Use the following `curl` command to retrieve a user:
````bash
$ curl --location --request GET "localhost:3000/player/$REST_API_PLAYER_ID" --header 'Content-Type: application/json'
````
Once executed, the service returns a user id
````json
{
  "hadByeOrForfeit": false,
  "byeNextRound": false,
  "playedAgainst": [],
  "playedColor": [],
  "results": [],
  "state": "active"
}
````
## PATCH
Use the following `curl` command to update all the patchable attributes:
````bash
curl --location --request PATCH "localhost:3000/player/$REST_API_PLAYER_ID" \
--header 'Content-Type: application/json' \
--data-raw '{
    "hadByeOrForfeit": true,
    "byeNextRound": true,
    "playedAgainst": ["a1x_V1h5Mq", "mgjR2IAh72"],
    "playedColor": [-1, 1],
    "results": [0, 1],
    "state": "inactive"
}'
````
The service returns the updated player's entity:
````json
{
  "tournament":"Zvei69rE0",
  "user":"xuBs3_tvU",
  "id":"nRo8tL2mP",
  "hadByeOrForfeit":true,
  "byeNextRound":true,
  "playedAgainst":["a1x_V1h5Mq","mgjR2IAh72"],
  "playedColor":[-1,1],
  "results":[0,1],
  "state":"inactive"
}
````
You can use the PATCH command to update one attribute:
````bash
curl --location --request PATCH "localhost:3000/player/$REST_API_PLAYER_ID" \
--header 'Content-Type: application/json' \
--data-raw '{
  "state": "active"
}'
````
The service returns the updated player's entity:
````json
{
  "tournament":"Zvei69rE0",
  "user":"xuBs3_tvU",
  "id":"nRo8tL2mP",
  "hadByeOrForfeit":true,
  "byeNextRound":true,
  "playedAgainst":["a1x_V1h5Mq","mgjR2IAh72"],
  "playedColor":[-1,1],
  "results":[0,1],
  "state":"active"
}
````
## PUT
`This service does not support PUT`

## DELETE
`This service does not support DELETE`

# For the future
game
id: string, // unique game id
tournament: string, // unique tournament id
white: string, // unique player id, must differ from black
black: string, // unique player id, must differ from white
round: string, // unique tournament round id
state: string, // unique state round id
date: string,  // a valid date

round
id: string, // unique game id
tournament: string, // unique tournament id
games: Array<string> // unique set of games
state: string, // unique state round id
